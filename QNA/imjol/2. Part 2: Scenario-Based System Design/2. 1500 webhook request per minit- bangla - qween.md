ржЕржмрж╢рзНржпржЗ! ржирж┐ржЪрзЗ ржЖржкржирж╛рж░ рж╕рзНржЯрзНржпрж╛ржХ (**NGINX тЖТ RabbitMQ тЖТ Laravel API тЖТ Docker Swarm**) ржЕржирзБржпрж╛ржпрж╝рзА ржПржХржЯрж┐ **рж░рзЗржЬрж┐рж▓рж┐ржпрж╝рзЗржирзНржЯ ржУ рж╕рзНржХрзЗрж▓рзЗржмрж▓ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░** ржжрзЗржУржпрж╝рж╛ рж╣рж▓рзЛ тАФ ASCII ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо рж╕рж╣, ржкрзНрж░рждрж┐ржЯрж┐ рж╕рзНржЯрзЗржк ржмрж╛ржВрж▓рж╛ржпрж╝ ржмрзНржпрж╛ржЦрзНржпрж╛ ржХрж░рж╛ рж╣ржпрж╝рзЗржЫрзЗред

---

### ЁЯз▒ ржЖржкржирж╛рж░ рж╕рзНржЯрзНржпрж╛ржХ:
- **NGINX**: ржЗржиржЧрзНрж░рзЗрж╕ ржкрзНрж░ржХрзНрж╕рж┐ (ржУржпрж╝рзЗржмрж╣рзБржХ рж░рж┐рж╕рж┐ржн ржХрж░ржмрзЗ)  
- **RabbitMQ**: ржорзЗрж╕рзЗржЬ ржХрж┐ржЙ (рж▓рзЛржб ржмрж╛ржлрж╛рж░ + ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕ ржкрзНрж░рж╕рзЗрж╕рж┐ржВ)  
- **Laravel API**: ржУржпрж╝рзЗржмрж╣рзБржХ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░ + ржХрж┐ржЙ ржкрзНрж░рзЛржбрж┐ржЙрж╕рж╛рж░  
- **Docker Swarm**: ржХржирзНржЯрзЗржЗржирж╛рж░ ржЕрж░рзНржХрзЗрж╕рзНржЯрзНрж░рзЗрж╢ржи (ржЕржЯрзЛ-рж╕рзНржХрзЗрж▓рж┐ржВ, рж╣рж╛ржЗ ржЕрзНржпрж╛ржнрзЗржЗрж▓рзЗржмрж┐рж▓рж┐ржЯрж┐)

---

### ЁЯЦ╝я╕П ASCII ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░ ржбрж╛ржпрж╝рж╛ржЧрзНрж░рж╛ржо

```
+---------------------+
|  ржмрж╛ржЗрж░рзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░    |  тЖР 1,500 webhook/ржорж┐ржирж┐ржЯ
| (ML рж╕рж╛рж░рзНржнрж┐рж╕ ржЗрждрзНржпрж╛ржжрж┐) |
+----------+----------+
           |
           | HTTPS (POST)
           тЖУ
+----------+----------+
|      NGINX          |  тЖР ржЗржиржЧрзНрж░рзЗрж╕ рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж╛рж░
|  (Docker Swarm рж╕рж╛рж░рзНржнрж┐рж╕) |
+----------+----------+
           |
           | ржлрж░ржУржпрж╝рж╛рж░рзНржб ржЯрзБ Laravel
           тЖУ
+----------+----------+
|   Laravel API       |  тЖР рж╢рзБржзрзБ RabbitMQ-рждрзЗ ржорзЗрж╕рзЗржЬ ржкрж╛ржарж╛ржпрж╝
|  (ржУржпрж╝рзЗржмрж╣рзБржХ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░) |     (рж░рзЗрж╕ржкржирзНрж╕: HTTP 200 ржжрзНрж░рзБржд!)
+----------+----------+
           |
           | AMQP (ржкрж╛ржмрж▓рж┐рж╢)
           тЖУ
+----------+----------+
|     RabbitMQ        |  тЖР ржорзЗрж╕рзЗржЬ рж╕рзНржЯрзЛрж░ + ржбрж┐ржЙрж░рзЗржмрж▓ ржХрж┐ржЙ
|  (Docker Swarm рж╕рж╛рж░рзНржнрж┐рж╕) |
+----------+----------+
           |
           | ржХржиржЬрж┐ржЙржо (ржкрзБрж▓)
           тЖУ
+----------+----------+
| Laravel Queue Worker|  тЖР ржнрж┐ржбрж┐ржУ ржЬрзЗржирж╛рж░рзЗрж╢ржи ржЗрждрзНржпрж╛ржжрж┐ ржнрж╛рж░рзА ржХрж╛ржЬ
|  (Docker Swarm рж╕рж╛рж░рзНржнрж┐рж╕) |     (ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХрзНрж░рзЛржирж╛рж╕рж▓рж┐ ржЪрж▓ржмрзЗ)
+---------------------+

тЖС рж╕ржмржЧрзБрж▓рзЛ ржХржирзНржЯрзЗржЗржирж╛рж░ Docker Swarm-ржП ржЪрж▓ржЫрзЗ тЖС
```

---

### ЁЯФН ржкрзНрж░рждрж┐ржЯрж┐ рж╕рзНржЯрзЗржк ржмрж╛ржВрж▓рж╛ржпрж╝ ржмрзНржпрж╛ржЦрзНржпрж╛:

#### тЬЕ **рж╕рзНржЯрзЗржк 1: ржмрж╛ржЗрж░рзЗрж░ рж╕рж╛рж░рзНржнрж╛рж░ ржерзЗржХрзЗ ржУржпрж╝рзЗржмрж╣рзБржХ**
- ML рж╕рж╛рж░рзНржнрж┐рж╕ ржкрзНрж░рждрж┐ ржорж┐ржирж┐ржЯрзЗ **1,500ржЯрж┐ POST рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ** ржкрж╛ржарж╛ржпрж╝ред
- ржкрзНрж░рждрж┐ржЯрж┐ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯрзЗ ржнрж┐ржбрж┐ржУ ржЬрзЗржирж╛рж░рзЗрж╢ржирзЗрж░ ржЗржнрзЗржирзНржЯ ржбрзЗржЯрж╛ ржерж╛ржХрзЗред

#### тЬЕ **рж╕рзНржЯрзЗржк 2: NGINX (ржЗржиржЧрзНрж░рзЗрж╕ ржкрзНрж░ржХрзНрж╕рж┐)**
- NGINX **Docker Swarm-ржП ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж┐рж╕** рж╣рж┐рж╕рзЗржмрзЗ ржЪрж▓ржЫрзЗред
- рж╕ржм ржУржпрж╝рзЗржмрж╣рзБржХ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ NGINX-ржП ржЖрж╕рзЗред
- NGINX рж╕рзЗржЧрзБрж▓рзЛржХрзЗ **Laravel API рж╕рж╛рж░рзНржнрж┐рж╕рзЗ** ржлрж░ржУржпрж╝рж╛рж░рзНржб ржХрж░рзЗред
- **рж▓рж╛ржн**: рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕рж┐ржВ, SSL ржЯрж╛рж░рзНржорж┐ржирзЗрж╢ржи, рж░рзЗржЯ рж▓рж┐ржорж┐ржЯрж┐ржВ (ржпржжрж┐ рж▓рж╛ржЧрзЗ)ред

#### тЬЕ **рж╕рзНржЯрзЗржк 3: Laravel API (ржУржпрж╝рзЗржмрж╣рзБржХ рж╣рзНржпрж╛ржирзНржбрж▓рж╛рж░)**
- Laravel рж╢рзБржзрзБ ржПржХржЯрж╛ ржХрж╛ржЬ ржХрж░рзЗ:  
  тЖТ рж░рж┐ржХрзЛржпрж╝рзЗрж╕рзНржЯ ржнрзНржпрж╛рж▓рж┐ржбрзЗржЯ ржХрж░рж╛  
  тЖТ ржбрзЗржЯрж╛ RabbitMQ-ржПрж░ ржХрж┐ржЙрждрзЗ **ржкрж╛ржмрж▓рж┐рж╢** ржХрж░рж╛  
  тЖТ рждрж╛ржбрж╝рж╛рждрж╛ржбрж╝рж┐ **HTTP 200 OK** рж░рж┐ржЯрж╛рж░рзНржи ржХрж░рж╛ (рж╕рж╛ржзрж╛рж░ржгржд < 100ms)
- **ржХрзЛржирзЛ ржнрж╛рж░рзА ржХрж╛ржЬ (ржнрж┐ржбрж┐ржУ ржЬрзЗржирж╛рж░рзЗрж╢ржи) ржПржЦрж╛ржирзЗ рж╣ржпрж╝ ржирж╛!**

#### тЬЕ **рж╕рзНржЯрзЗржк 4: RabbitMQ (ржорзЗрж╕рзЗржЬ ржмрзНрж░рзЛржХрж╛рж░)**
- RabbitMQ **Docker Swarm-ржП ржПржХржЯрж┐ рж╕рж╛рж░рзНржнрж┐рж╕** рж╣рж┐рж╕рзЗржмрзЗ ржЪрж▓ржЫрзЗ (ржкрж╛рж░рзНрж╕рж┐рж╕рзНржЯрзЗржирзНржЯ ржнрж▓рж┐ржЙржо рж╕рж╣)ред
- ржорзЗрж╕рзЗржЬржЧрзБрж▓рзЛ **ржбрж┐ржЙрж░рзЗржмрж▓ ржХрж┐ржЙ**-рждрзЗ рж╕рзНржЯрзЛрж░ рж╣ржпрж╝ тЖТ рж╕рж╛рж░рзНржнрж╛рж░ ржХрзНрж░рзНржпрж╛рж╢ рж╣рж▓рзЗржУ ржбрзЗржЯрж╛ ржпрж╛ржмрзЗ ржирж╛ред
- ржПржЯрж┐ рж▓рзЛржбржХрзЗ **ржмрж╛ржлрж╛рж░** ржХрж░рзЗ тЖТ ржкрж┐ржХ ржЯрзНрж░рж╛ржлрж┐ржХрзЗржУ рж╕рж┐рж╕рзНржЯрзЗржо ржХрзНрж░рзНржпрж╛рж╢ ржХрж░ржмрзЗ ржирж╛ред

#### тЬЕ **рж╕рзНржЯрзЗржк 5: Laravel Queue Worker (ржЕрзНржпрж╛рж╕рж┐ржЩрзНржХ ржкрзНрж░рж╕рзЗрж╕рж░)**
- ржЖрж▓рж╛ржжрж╛ Laravel ржУржпрж╝рж╛рж░рзНржХрж╛рж░ ржХржирзНржЯрзЗржЗржирж╛рж░ **RabbitMQ ржерзЗржХрзЗ ржорзЗрж╕рзЗржЬ ржкрзБрж▓** ржХрж░рзЗред
- ржкрзНрж░рждрж┐ржЯрж┐ ржорзЗрж╕рзЗржЬрзЗрж░ ржЬржирзНржп **ржнрж┐ржбрж┐ржУ ржЬрзЗржирж╛рж░рзЗрж╢ржи** ржХрж░рзЗ (ML рж╕рж╛рж░рзНржнрж┐рж╕ ржХрж▓ ржХрж░рзЗ ржмрж╛ рж▓рзЛржХрж╛рж▓рж┐ ржкрзНрж░рж╕рзЗрж╕ ржХрж░рзЗ)ред
- ржПржЗ ржУржпрж╝рж╛рж░рзНржХрж╛рж░ржЧрзБрж▓рзЛ **Docker Swarm-ржП рж╕рзНржХрзЗрж▓ ржХрж░рж╛ ржпрж╛ржпрж╝** (ржпрзЗржоржи: `docker service scale worker=5`)

#### тЬЕ **рж╕рзНржЯрзЗржк 6: Docker Swarm (ржЕрж░рзНржХрзЗрж╕рзНржЯрзНрж░рзЗрж╢ржи)**
- рж╕ржм рж╕рж╛рж░рзНржнрж┐рж╕ (NGINX, Laravel, RabbitMQ, Worker) **Swarm рж╕рж╛рж░рзНржнрж┐рж╕** рж╣рж┐рж╕рзЗржмрзЗ ржбрж┐ржкрзНрж▓ржпрж╝ ржХрж░рж╛ред
- **ржЕржЯрзЛ-рж╣рж┐рж▓рж┐ржВ**: ржХрзЛржирзЛ ржХржирзНржЯрзЗржЗржирж╛рж░ ржХрзНрж░рзНржпрж╛рж╢ рж╣рж▓рзЗ ржЕржЯрзЛ рж░рж┐рж╕рзНржЯрж╛рж░рзНржЯ рж╣ржмрзЗред
- **рж╣рж░рж╛ржЗржЬржирзНржЯрж╛рж▓ рж╕рзНржХрзЗрж▓рж┐ржВ**:  
  - ржкрж┐ржХ ржЯрзНрж░рж╛ржлрж┐ржХрзЗ Laravel API ржмрж╛ Worker рж╕рзНржХрзЗрж▓ ржХрж░рж╛ ржпрж╛ржмрзЗред
  - NGINX ржЕржЯрзЛ-рж▓рзЛржб ржмрзНржпрж╛рж▓рзЗржирзНрж╕ ржХрж░ржмрзЗред

---

### ЁЯЫбя╕П рж░рзЗржЬрж┐рж▓рж┐ржпрж╝рзЗржирзНрж╕рж┐ ржлрж┐ржЪрж╛рж░ (Resiliency)

| ржлрж┐ржЪрж╛рж░ | ржХрзАржнрж╛ржмрзЗ ржХрж╛ржЬ ржХрж░рзЗ |
|-------|----------------|
| **ржЗржбрзЗржорзНржкрзЛржЯрзЗржирзНрж╕рж┐** | Laravel-ржП ржУржпрж╝рзЗржмрж╣рзБржХрзЗ `event_id` ржЪрзЗржХ ржХрж░рзЗ ржбрзБржкрзНрж▓рж┐ржХрзЗржЯ ржкрзНрж░рж╕рзЗрж╕ ржПржбрж╝рж╛ржирзЛ |
| **рж░рж┐ржЯрзНрж░рж╛ржЗ + DLQ** | RabbitMQ-ржП рж░рж┐ржЯрзНрж░рж╛ржЗ ржХрж╛ржЙржирзНржЯрж╛рж░ + ржбрзЗржб рж▓рзЗржЯрж╛рж░ ржХрж┐ржЙ (DLQ) |
| **ржЕржЯрзЛ-рж╕рзНржХрзЗрж▓рж┐ржВ** | Docker Swarm-ржП ржорзНржпрж╛ржирзБржпрж╝рж╛рж▓рж┐ ржмрж╛ ржорзЗржЯрзНрж░рж┐ржХрзНрж╕ ржмрзЗрж╕ржб рж╕рзНржХрзЗрж▓рж┐ржВ |
| **ржкрж╛рж░рж╕рж┐рж╕рзНржЯрзЗржирзНрж╕** | RabbitMQ-ржПрж░ ржбрзЗржЯрж╛ ржбрж┐рж╕рзНржХрзЗ рж╕рзЗржн рж╣ржпрж╝ (ржнрж▓рж┐ржЙржо ржорж╛ржЙржирзНржЯ ржХрж░рзЗ) |

---

### ЁЯУж ржбржХрж╛рж░ рж╕рж╛рж░рзНржнрж┐рж╕ ржЙржжрж╛рж╣рж░ржг (docker-compose.yml рж╕рзНржирж┐ржкрзЗржЯ)

```yaml
services:
  nginx:
    image: nginx
    ports: [80:80]
    deploy: { replicas: 2 }

  laravel-api:
    image: your-laravel-api
    deploy: { replicas: 3 }

  rabbitmq:
    image: rabbitmq:3-management
    volumes: [rabbitmq_data:/var/lib/rabbitmq]
    deploy: { replicas: 1 }  # (ржХрзНрж▓рж╛рж╕рзНржЯрж╛рж░ ржЪрж╛ржЗрж▓рзЗ 3+)

  laravel-worker:
    image: your-laravel-api
    command: php artisan queue:work rabbitmq --sleep=3 --tries=3
    deploy: { replicas: 2 }  # ржкрж┐ржХрзЗ 5-10 ржкрж░рзНржпржирзНржд рж╕рзНржХрзЗрж▓ ржХрж░рзБржи
```

---

### тЬЕ ржЪрзВржбрж╝рж╛ржирзНржд ржоржирзНрждржмрзНржп:

> ржЖржкржирж╛рж░ **1,500 webhook/ржорж┐ржирж┐ржЯ** рж▓рзЛржб  
> ржПржЗ ржЖрж░рзНржХрж┐ржЯрзЗржХржЪрж╛рж░рзЗ **ржЦрзБржм рж╕рж╣ржЬрзЗ, ржирж┐рж░рж╛ржкржжрзЗ, рж╕рзНржХрзЗрж▓рзЗржмрж▓ржнрж╛ржмрзЗ** рж╣рзНржпрж╛ржирзНржбрзЗрж▓ рж╣ржмрзЗ!  
> ржХрж╛рж░ржг:  
> - NGINX тЖТ ржлрж╛рж╕рзНржЯ ржЗржиржЧрзНрж░рзЗрж╕  
> - Laravel API тЖТ рж╢рзБржзрзБ ржХрж┐ржЙрждрзЗ ржкрж╛ржарж╛ржпрж╝ (ржиржи-ржмрзНрж▓ржХрж┐ржВ)  
> - RabbitMQ тЖТ рж▓рзЛржб ржмрж╛ржлрж╛рж░ + рж░рзЗрж▓рж╛ржпрж╝рзЗржмрж┐рж▓рж┐ржЯрж┐  
> - Docker Swarm тЖТ ржЕржЯрзЛ-рж╣рж┐рж▓рж┐ржВ + рж╕рзНржХрзЗрж▓рж┐ржВ  

ржПржоржиржХрж┐ ржЯрзНрж░рж╛ржлрж┐ржХ **10x ржмрзЗржбрж╝рзЗ 15,000/ржорж┐ржирж┐ржЯ** рж╣рж▓рзЗржУ рж╢рзБржзрзБ **worker replicas** ржмрж╛ржбрж╝рж╛рж▓рзЗржЗ ржЪрж▓ржмрзЗ! ЁЯЪА

ржЪрж╛ржЗрж▓рзЗ ржкрзБрж░рзЛ `docker-compose.yml` ржмрж╛ Laravel RabbitMQ ржХржиржлрж┐ржЧ ржжрж┐рждрзЗ ржкрж╛рж░рж┐!
